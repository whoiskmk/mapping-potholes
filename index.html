<!DOCTYPE html>
<html>
<head>
    <title>Leaflet Pothole Clusters</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js"></script>-->

    <!--<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>-->
    <link rel="stylesheet" href="leaflet/leaflet.css" />
    <script src="leaflet/leaflet.js"></script>

    <!--<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js'></script>
   <!-- <script type='text/javascript' src='http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js'></script>
    <script type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/0.4.0/leaflet.markercluster.js'></script>

    <!--<link rel="stylesheet" href="//unpkg.com/leaflet@1.0.1/dist/leaflet.css" />
    <script type="text/javascript" src="//unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>-->




    <link rel="stylesheet" href="dist/MarkerCluster.css" />
    <link rel="stylesheet" href="dist/MarkerCluster.Default.css" />
    <script src="dist/leaflet.markercluster-src.js"></script>

    <script src="http://www.mapquestapi.com/sdk/js/v7.2.s/mqa.toolkit.js?key=CI6VvHdudeE9WTpCx0ptrvgzJGSiOYYW"></script>

    <script type="text/javascript" src="//www.mapquestapi.com/sdk/leaflet/v2.s/mq-map.js?key=CI6VvHdudeE9WTpCx0ptrvgzJGSiOYYW"></script>
    <script type="text/javascript" src="//www.mapquestapi.com/sdk/leaflet/v2.s/mq-routing.js?key=CI6VvHdudeE9WTpCx0ptrvgzJGSiOYYW"></script>


    <script type="text/javascript" src="maps/potholeMarkers.js"></script>
    <!--<script type="text/javascript" src="maps/testing.js"></script>-->


    <script type="text/javascript">
       // "use strict";

       var map, L, MQ, cpts, rl;

       function init() {

           map = L.map('map', {
               layers: MQ.mapLayer(),
               center: [29.951065, -90.071533],
               zoom: 13
           });



           L.control.scale().addTo(map);


           cpts = new L.layerGroup();
           cpts.addTo(map);



           var potholes = new L.markerClusterGroup({
               maxClusterRadius: 40
           });
           for (var i = 0; i < markers.length; i++) {
               var latlng = new L.LatLng(markers[i].lat, markers[i].lng);
               potholes.addLayer(new L.Circle(latlng, 10));
           }
           map.addLayer(potholes);
       }
       window.onload = init;

       function routeit() {

           var cpc = [], dir = MQ.routing.directions();

           dir.route({
               locations: [
                   document.getElementById('orig').value,
                   document.getElementById('dest').value
               ]
           });

           if (rl) {
               map.removeLayer(rl);
           }

           rl = MQ.routing.routeLayer({
               directions: dir,
               fitBounds: true,
               ribbonOptions: {draggable: false}
           });
           rl.addTo(map);

           map.addLayer(rl);
       }
       // Remember to include either the Leaflet 0.7.3 or the Leaflet 1.0.0-beta1 library
/*
       var myCenter = new L.LatLng(50.5, 30.51);
       var map = new L.Map('map', {center: myCenter, zoom: 15});

       var positron = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
           attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'
       }).addTo(map);

       L.Routing.control({
           plan: L.Routing.plan([[57.73, 11.94], [57.7, 11.9]], {
               createMarker: function(i, wp, n) {
                   return;
               }.bind(this),
           }),
           addWaypoints: true,
           draggableWaypoints: false,
           routeWhileDragging: false,
           fitSelectedRoutes: true,
           lineOptions: {
               styles: [
                   {color: 'red', opacity: 0.15, weight: 9},
                   {color: 'green', opacity: 0.8, weight: 6},
                   {color: 'black', opacity: 1, weight: 2}
               ]
           },
       }).addTo(map);
*/
    </script>
    <style>
        #map {
            width: 800px;
            height: 600px;
        }
    </style>


</head>

<body>
<div class="container">
    <div class="container">
        <h1>Leaflet Pothole Clusters</h1>

        <p>Here's an interactive map indicating where potholes are located in New Orleans.  The data comes from <a href="https://data.nola.gov/City-Administration/311-Calls-2012-Present-/3iz8-nghx" target="_blank">NOLA.gov</a>.

    </div>
</div>
<div id="map"></div>



<div id="ipt">
    <br>Create a route by hitting the Route button.  Then create control points by clicking the map.  Adjust the control points by clicking the circle for the popup and set the radius, set the weight, or remove the control point.  Then click Route again.</br>
    <input type="text" id="orig" value="new orleans, LA"/>
    <input type="text" id="dest" value="metarie, LA"/>
    <input type="button" id="route" onclick="routeit();" value="Route" />


</div>




</body>
</html>
